---
layout:     post
title:      面经一：计算机网络
date:       2018-10-20
author:     Qyh
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - 面经
    - 计算机网络
---

> 到现在也没拿到offer，想着春招都快过去了，但是不能放弃呀，还是要愈挫愈勇，为秋招准备一些东西！

### 1.HTTP VS HTTPS

- HTTP运行在TCP协议上，明文传输，HTTPS运行在SSL(Secure Socket Layer)上，SSL运行在TCP上，是添加了加密和验证机制的HTTP；
- HTTP默认端口80，HTTPS默认端口443；
- HTTPS由于加密和解密处理比HTTP消耗更多的CPU和内存资源；
- HTTPS通信需要证书，比HTTP安全；


### 2.对称加密 VS 非对称加密

- 对称加密指加密和解密使用同一个密钥，最大问题就是密钥如何安全发送的问题，非对称加密使用一对非对称密钥——公钥和私钥，公钥可以随意发布，但私钥只有自己知道。发送方用公钥对报文进行加密，接收方私钥进行解密；
- 由于非对称加密不需要发送用来解密的私钥，所以可以保证安全性；但是和对称加密比起来，它非常的慢；
- 因此可以用对称加密传递信息，但对称加密所使用的密钥我们可以通过非对称加密的方式发送出去。


### 3.三次握手

![avatar](/img/2019-04-22/三次握手.png)


### 4.为什么要三次握手

原因：**为了防止已失效的请求报文又传到服务端产生错误**

Client请求的报文段在某个网络节点长时间滞留，等到连接释放后才到达Server，若不采用三次握手，一旦Server收到请求后向Client发送确认数据包后新的连接就建立了。
但由于Client此时并未发送建立连接的请求，所以不会与Server通信，而Server会等待Client的请求，Server就浪费了一定的资源。采用三次握手后，Server因为没有收到来自Client的确认，就不会建立连接。


### 5.四次挥手

![avatar](/img/2019-04-22/四次挥手.png)


### 6.time_wait存在的理由

#### 1）为了实现TCP全双工连接的可靠释放

最后的ack由主动关闭连接的一方发出，如果丢失，被动方会重发最终的FIN, 如果这时主动方处于CLOSED状态就会响应rst分节而不是ack，所以主动方要处于TIME_WAIT状态；

#### 2）为了使旧的数据包因网络过期而消失

TCP分节可能由于路由器异常而“迷途”，在迷途期间，发送端可能超时重发这个分节，迷途的分节在路由器修复后也会被送到最终目的地，从而影响新的连接；
为了避免这个情况，TCP协议不允许处于TIME_WAIT状态的连接启动一个新的可用连接，并且TIME_WAIT状态持续2MSL，经过2MSL后，旧连接的重复分组都会网络中消失。


#### 7.TCP的可靠性

- 数据包校验：目的是检测数据在传输过程中的任何变化，若校验出包有错，则丢弃报文段并且不给出响应，这时TCP发送数据端超时后会重发数据；
- 对失序数据包重排序：既然TCP报文段作为IP数据报来传输，而IP数据报的到达可能会失序，因此TCP报文段的到达也可能会失序。TCP将对失序数据进行重新排序，然后才交给应用层；
- 丢弃重复数据：对于重复数据，能够丢弃重复数据；
- 应答机制：当TCP收到发自TCP连接另一端的数据，它将发送一个确认。这个确认不是立即发送，通常将推迟几分之一秒；
- 超时重发：当TCP发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段；
- 流量控制：TCP连接的每一方都有固定大小的缓冲空间。TCP的接收端只允许另一端发送接收端缓冲区所能接纳的数据，这可以防止较快主机致使较慢主机的缓冲区溢出，这就是流量控制。TCP使用的流量控制协议是可变大小的滑动窗口协议。


#### 8.TCP的拥塞控制机制

拥塞控制就是防止过多的数据注入网络中，使网络中的路由器不至于过载。拥塞控制是全局过程，而流量控制指的是点对点通信量的控制。

- 慢启动：不要一开始就发送大量的数据，先探测一下网络的拥塞程度，也就是说由小到大逐渐增加拥塞窗口的大小;

![avatar](/img/2019-04-22/慢开始与拥塞避免.png) 

- 拥塞避免：拥塞避免算法让拥塞窗口缓慢增长，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍，这样拥塞窗口按线性规律缓慢增长；

- 快重传：快重传要求接收方在收到一个 失序的报文段 后就立即发出 重复确认（为的是使发送方及早知道有报文段没有到达对方）而不要等到自己发送数据时捎带确认。快重传算法规定，发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段，而不必继续等待设置的重传计时器时间到期；

![avatar](/img/2019-04-22/快重传.jpg) 

- 快恢复：快重传配合使用的还有快恢复算法，当发送方连续收到三个重复确认时，就执行“乘法减小”算法，把ssthresh门限减半，但是接下去并不执行慢开始算法：因为如果网络出现拥塞的话就不会收到好几个重复的确认，所以发送方现在认为网络可能没有出现拥塞。所以此时不执行慢开始算法，而是将cwnd设置为ssthresh的大小，然后执行拥塞避免算法。

![avatar](/img/2019-04-22/快恢复.jpg) 


#### 8.TCP VS UDP

- TCP面向连接，UDP无连接；
- TCP可靠，UDP不可靠；
- TCP只支持点对点通信，UDP支持一对一、一对多、多对一和多对多的通信方式；
- TCP面向字节流，UDP面向报文；
- TCP有拥塞控制机制，UDP没有（适合媒体通信）；
- TCP首部开销20字节，UDP首部开销8字节。


#### 9.GET VS POST

- GET用来从服务器上获取资源，POST用来更新服务器上的资源；
- GET是幂等的，读取同一个资源总是得到相同的数据，POST不是幂等的，因为每次请求对资源的改变并不是相同的，因为GET不改变服务器的资源，POST会对服务器的资源进行改变；
- GET请求的数据附在URL之后，即将请求数据放置在HTTP报文的请求头 中，以?分割URL和传输数据，参数之间以&相连，而POST请求会把提交的数据放置是HTTP请求报文的请求体中；
- POST比GET安全，因为GET请求提交的数据明文出现在URL上，而POST请求的数据被包装到请求体中，相对更安全；
- GET请求的长度受限于浏览器或服务器对URL长度的限制，允许发送的数据量比较小，POST请求的数据则没有大小限制。


#### 10.从输入网址到获得页面的过程

1）浏览器查询DNS（包括浏览器搜索自身的DNS缓存、搜索操作系统的DNS缓存、读取本地的Host文件和向本地DNS服务器进行查询等），获取域名对应的IP地址；
2）浏览器获得域名对应的IP地址以后，向服务器请求建立连接，发起三次握手；
3）TCP连接建立后，浏览器向服务器发送HTTP请求；
4）服务器接收到请求后根据路径参数映射到特定的请求处理器进行处理，并将处理结果及相应的视图返回给浏览器；
5）浏览器解析并渲染视图，若遇到对js、css文件等静态资源的引用，重复上述步骤并向服务器请求这些资源；
6）浏览器根据其请求到的资源、数据渲染页面，最终向用户呈现一个完整的页面。


#### 11.SQL注入

